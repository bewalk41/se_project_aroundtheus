!function(){"use strict";class e{constructor(e,t,s,n){let{name:r,link:o}=e;this._name=r,this._link=o,this._cardSelector=t,this._handleImageClick=s,this._handleDeleteClick=n}_setEventListeners(){this._cardElement.querySelector(".card__trash-button").addEventListener("click",(()=>{"function"==typeof this._handleDeleteClick&&this._handleDeleteClick()})),this._cardElement.querySelector(".card__image").addEventListener("click",(()=>{"function"==typeof this._handleImageClick&&this._handleImageClick(this._link,this._name)}))}getView(){this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardElement.querySelector(".card__header").textContent=this._name;const e=this._cardElement.querySelector(".card__image");return e.src=this._link,e.alt=this._name,this._setEventListeners(),this._cardElement}}var t=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t,this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._inputEls=Array.from(this._formElement.querySelectorAll(this._inputSelector))}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);t.textContent=e.validationMessage,e.classList.add(this._inputErrorClass),t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);t.textContent="",e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass)}_hasInvalidInput(){return this._inputEls.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?this._disableButton():this._enableButton()}_disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_setEventListeners(){this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners(),this._toggleButtonState()}resetValidation(){this._inputEls.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState()}toggleButtonState(){this._toggleButtonState()}},s=class{constructor(e){this._popupElement=document.querySelector(e),this._closeButton=this._popupElement.querySelector(".modal__close"),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._closeButton.addEventListener("click",(()=>this.close())),this._popupElement.addEventListener("mousedown",(e=>{e.target===this._popupElement&&this.close()}))}},n=class extends s{constructor(e,t){super(e),this._handleFormSubmit=t,this._form=this._popupElement.querySelector(".modal__form"),this._inputList=Array.from(this._form.querySelectorAll(".modal__input")),this._submitButton=this._form.querySelector(".modal__button")}_getInputValues(){return this._formValues={},this._inputList.forEach((e=>{this._formValues[e.name]=e.value})),this._formValues}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}renderLoading(e){this._submitButton.textContent=e?"Saving...":"Save"}close(){super.close(),this._form.reset()}},r=class extends s{constructor(e){super(e),this._imageElement=this._popupElement.querySelector(".modal__image"),this._captionElement=this._popupElement.querySelector(".modal__caption")}open(e){let{name:t,link:s}=e;this._imageElement.src=s,this._imageElement.alt=t,this._captionElement.textContent=t,super.open()}};class o extends s{constructor(e){super(e),this._confirmButton=this._popupElement.querySelector(".modal__button_confirm"),this._confirmButtonText=this._confirmButton.textContent}setConfirmationHandler(e){this._handleConfirm=e}open(e){super.open(),this._data=e,console.log("PopupWithConfirmation open data:",this._data)}setEventListeners(){super.setEventListeners(),this._confirmButton.addEventListener("click",(()=>{this._handleConfirm&&(console.log("Confirmation button clicked with data:",this._data),this._handleConfirm(this._data))}))}renderLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._confirmButton.textContent=e?t:this._confirmButtonText}}var i=class{constructor(e){let{nameSelector:t,jobSelector:s,avatarSelector:n}=e;this._nameElement=document.querySelector(t),this._jobElement=document.querySelector(s),this._avatarElement=document.querySelector(n)}getUserInfo(){return{name:this._nameElement.textContent,job:this._jobElement.textContent,avatar:this._avatarElement.src}}setUserInfo(e){let{name:t,job:s,avatar:n}=e;t&&(this._nameElement.textContent=t),s&&(this._jobElement.textContent=s),n&&(this._avatarElement.src=n)}setUserAvatar(e){this._avatarElement.src=e}};class a{constructor(e,t){let{items:s,renderer:n}=e;this._renderedItems=s||[],this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._renderedItems.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}const l=[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],c={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"};var d=new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._checkResponse)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._checkResponse)}setUserInfo(e){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:{...this._headers,"Content-Type":"application/json"},body:JSON.stringify(e)}).then(this._checkResponse)}addCard(e){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:{...this._headers,"Content-Type":"application/json"},body:JSON.stringify(e)}).then(this._checkResponse)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}likeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._checkResponse)}dislikeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}setUserAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:{...this._headers,"Content-Type":"application/json"},body:JSON.stringify(e)}).then(this._checkResponse)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"f2772a6b-ab7a-4d91-8e26-99a73e7be810","Content-Type":"application/json"}});document.addEventListener("DOMContentLoaded",(()=>{const s=document.querySelector("#profile-edit-button"),h=document.querySelector("#add-card-button"),u=document.querySelector(".profile__image-button"),_=new i({nameSelector:".profile__name",jobSelector:".profile__description",avatarSelector:".profile__image"}),m=new t(c,document.querySelector("#profile-edit-modal .modal__form")),p=new t(c,document.querySelector("#add-card-modal .modal__form"));m.enableValidation(),p.enableValidation();const E=(e,t)=>{v.open({name:t,link:e})},f=new n("#profile-edit-modal",(e=>{f.renderLoading(!0),d.setUserInfo({name:e.heading,about:e.description}).then((()=>{_.setUserInfo({name:e.heading,job:e.description}),f.close()})).catch((e=>console.error(e))).finally((()=>f.renderLoading(!1)))})),g=new n("#add-card-modal",(e=>{g.renderLoading(!0);const t={name:e.heading,link:e.description};d.addCard(t).then((e=>{const t=S(e);L.addItem(t),g.close()})).catch((e=>console.error(e))).finally((()=>g.renderLoading(!1)))})),v=new r("#image-modal"),b=new o("#confirm-popup");b.setEventListeners(),b.setConfirmationHandler((e=>{let{cardId:t,cardElement:s}=e;console.log(`Card ID to delete: ${t}`),b.renderLoading(!0),d.deleteCard(t).then((()=>{s.remove(),b.close()})).catch((e=>console.error(e))).finally((()=>b.renderLoading(!1)))})),f.setEventListeners(),g.setEventListeners(),v.setEventListeners();const C=new n("#profile-popup",(e=>{C.renderLoading(!0),d.setUserAvatar({avatar:e.description}).then((e=>{_.setUserAvatar(e.avatar),C.close()})).catch((e=>console.error(e))).finally((()=>C.renderLoading(!1)))}));function S(t){return new e(t,"#card-template",E,((e,t)=>{console.log(`Opening confirmation for card ID: ${e}`),b.open({cardId:e,cardElement:t})}),((e,t,s)=>{t?d.dislikeCard(e).then((e=>{s.setIsLiked(!1)})).catch((e=>console.error(e))):d.likeCard(e).then((e=>{s.setIsLiked(!0)})).catch((e=>console.error(e)))})).getView()}C.setEventListeners();const L=new a({items:l,renderer:e=>{const t=S(e);L.addItem(t)}},".cards__list");s.addEventListener("click",(()=>{const e=_.getUserInfo();f.setInputValues({heading:e.name,description:e.job}),f.open(),m.resetValidation()})),h.addEventListener("click",(()=>{g.open(),p.toggleButtonState()})),u.addEventListener("click",(()=>{C.open()})),d.getUserInfo().then((e=>{_.setUserInfo(e)})).catch((e=>console.error("Error fetching user info:",e))),d.getInitialCards().then((e=>{console.log("Initial Cards:",e),L.renderItems(e)})).catch((e=>console.error("Error fetching initial cards:",e)))}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFlBQVlLLEVBQWEsSUFFbEMwQyxPQUFPQyxHQUFRekUsUUFBUTBFLE1BQU0sZ0NBQWlDRCxJQUFLLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICB7IG5hbWUsIGxpbmsgfSxcclxuICAgIGNhcmRTZWxlY3RvcixcclxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXHJcbiAgICBoYW5kbGVEZWxldGVDbGlja1xyXG4gICkge1xyXG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gbGluaztcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdHJhc2gtYnV0dG9uXCIpO1xyXG4gICAgZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKCk7IC8vIENhbGwgdGhlIGhhbmRsZURlbGV0ZUNsaWNrIGNhbGxiYWNrXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGNhcmRJbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICBjYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgaWYgKHR5cGVvZiB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMuX2xpbmssIHRoaXMuX25hbWUpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgY29uc3QgY2FyZFRpdGxlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19oZWFkZXJcIik7XHJcbiAgICBjYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIGNvbnN0IGNhcmRJbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICBjYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgIGNhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihvcHRpb25zLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IG9wdGlvbnMuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gb3B0aW9ucy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBvcHRpb25zLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBvcHRpb25zLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBvcHRpb25zLmVycm9yQ2xhc3M7XHJcblxyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG4gICAgdGhpcy5faW5wdXRFbHMgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XHJcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvckVsID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICAgIGVycm9yRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JFbCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgICBlcnJvckVsLnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dEVscy5zb21lKChpbnB1dEVsKSA9PiAhaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fZW5hYmxlQnV0dG9uKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfZGlzYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIF9lbmFibGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XHJcbiIsImNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2ZW50KSB7XHJcbiAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChldnQudGFyZ2V0ID09PSB0aGlzLl9wb3B1cEVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9wdXA7XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpOyAvLyBBZGQgdGhpcyBsaW5lXHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZykge1xyXG4gICAgaWYgKGlzTG9hZGluZykge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZlXCI7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtO1xyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW1hZ2VFbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fY2FwdGlvbkVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FwdGlvblwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5zcmMgPSBsaW5rO1xyXG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LmFsdCA9IG5hbWU7XHJcbiAgICB0aGlzLl9jYXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhJbWFnZTtcclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9jb25maXJtQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLm1vZGFsX19idXR0b25fY29uZmlybVwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5fY29uZmlybUJ1dHRvblRleHQgPSB0aGlzLl9jb25maXJtQnV0dG9uLnRleHRDb250ZW50OyAvLyBTdG9yZSB0aGUgaW5pdGlhbCBidXR0b24gdGV4dFxyXG4gIH1cclxuXHJcbiAgc2V0Q29uZmlybWF0aW9uSGFuZGxlcihoYW5kbGVyKSB7XHJcbiAgICB0aGlzLl9oYW5kbGVDb25maXJtID0gaGFuZGxlcjtcclxuICB9XHJcblxyXG4gIG9wZW4oZGF0YSkge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgdGhpcy5fZGF0YSA9IGRhdGE7IC8vIFN0b3JlIHRoZSBkYXRhIG5lZWRlZCBmb3IgY29uZmlybWF0aW9uXHJcbiAgICBjb25zb2xlLmxvZyhcIlBvcHVwV2l0aENvbmZpcm1hdGlvbiBvcGVuIGRhdGE6XCIsIHRoaXMuX2RhdGEpOyAvLyBEZWJ1Z2dpbmcgbGluZVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fY29uZmlybUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5faGFuZGxlQ29uZmlybSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiQ29uZmlybWF0aW9uIGJ1dHRvbiBjbGlja2VkIHdpdGggZGF0YTpcIiwgdGhpcy5fZGF0YSk7IC8vIERlYnVnZ2luZyBsaW5lXHJcbiAgICAgICAgdGhpcy5faGFuZGxlQ29uZmlybSh0aGlzLl9kYXRhKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZywgbG9hZGluZ1RleHQgPSBcIlNhdmluZy4uLlwiKSB7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgIHRoaXMuX2NvbmZpcm1CdXR0b24udGV4dENvbnRlbnQgPSBsb2FkaW5nVGV4dDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2NvbmZpcm1CdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9jb25maXJtQnV0dG9uVGV4dDtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciwgYXZhdGFyU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9qb2JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9hdmF0YXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgICBqb2I6IHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgIGF2YXRhcjogdGhpcy5fYXZhdGFyRWxlbWVudC5zcmMsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBqb2IsIGF2YXRhciB9KSB7XHJcbiAgICBpZiAobmFtZSkge1xyXG4gICAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB9XHJcbiAgICBpZiAoam9iKSB7XHJcbiAgICAgIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBqb2I7XHJcbiAgICB9XHJcbiAgICBpZiAoYXZhdGFyKSB7XHJcbiAgICAgIHRoaXMuX2F2YXRhckVsZW1lbnQuc3JjID0gYXZhdGFyO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0VXNlckF2YXRhcihhdmF0YXIpIHtcclxuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQuc3JjID0gYXZhdGFyO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVXNlckluZm87XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zID0gaXRlbXMgfHwgW107IC8vIEVuc3VyZSBpdGVtcyBpcyBhbiBhcnJheVxyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiIsIi8vIHV0aWxzL2NvbnN0YW50cy5qc1xyXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uT3B0aW9ucyA9IHtcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuIiwiY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcclxuICB9XHJcblxyXG4gIF9jaGVja1Jlc3BvbnNlKHJlcykge1xyXG4gICAgaWYgKHJlcy5vaykge1xyXG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgIH1cclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgLi4udGhpcy5faGVhZGVycyxcclxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgYWRkQ2FyZChkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAuLi50aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGxpa2VDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGRpc2xpa2VDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJBdmF0YXIoZGF0YSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAuLi50aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG59XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCJmMjc3MmE2Yi1hYjdhLTRkOTEtOGUyNi05OWE3M2U3YmU4MTBcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXBpO1xyXG4iLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm1hdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IHsgdmFsaWRhdGlvbk9wdGlvbnMsIGluaXRpYWxDYXJkcyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjsgLy8gSW1wb3J0IGluaXRpYWwgY2FyZHNcclxuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7IC8vIEVuc3VyZSB0aGUgQ1NTIHBhdGggaXMgY29ycmVjdFxyXG5pbXBvcnQgYXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiOyAvLyBJbXBvcnQgdGhlIGFwaSBpbnN0YW5jZVxyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xyXG4gIGNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xyXG4gIGNvbnN0IGFkZENhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLWJ1dHRvblwiKTtcclxuICBjb25zdCBwcm9maWxlSW1hZ2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlLWJ1dHRvblwiKTtcclxuICBjb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgICBuYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX25hbWVcIixcclxuICAgIGpvYlNlbGVjdG9yOiBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxyXG4gICAgYXZhdGFyU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2ltYWdlXCIsIC8vIEFkZCB0aGUgYXZhdGFyIHNlbGVjdG9yXHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgICB2YWxpZGF0aW9uT3B0aW9ucyxcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LW1vZGFsIC5tb2RhbF9fZm9ybVwiKVxyXG4gICk7XHJcbiAgY29uc3QgYWRkQ2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICAgIHZhbGlkYXRpb25PcHRpb25zLFxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1tb2RhbCAubW9kYWxfX2Zvcm1cIilcclxuICApO1xyXG4gIGVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICBhZGRDYXJkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiAgY29uc3QgaGFuZGxlSW1hZ2VDbGljayA9IChsaW5rLCBuYW1lKSA9PiB7XHJcbiAgICBpbWFnZVBvcHVwLm9wZW4oeyBuYW1lLCBsaW5rIH0pO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IHByb2ZpbGVFZGl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICAgIFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLFxyXG4gICAgKGZvcm1EYXRhKSA9PiB7XHJcbiAgICAgIHByb2ZpbGVFZGl0UG9wdXAucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuICAgICAgYXBpXHJcbiAgICAgICAgLnNldFVzZXJJbmZvKHtcclxuICAgICAgICAgIG5hbWU6IGZvcm1EYXRhLmhlYWRpbmcsXHJcbiAgICAgICAgICBhYm91dDogZm9ybURhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XHJcbiAgICAgICAgICAgIG5hbWU6IGZvcm1EYXRhLmhlYWRpbmcsXHJcbiAgICAgICAgICAgIGpvYjogZm9ybURhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIHByb2ZpbGVFZGl0UG9wdXAuY2xvc2UoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpXHJcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4gcHJvZmlsZUVkaXRQb3B1cC5yZW5kZXJMb2FkaW5nKGZhbHNlKSk7XHJcbiAgICB9XHJcbiAgKTtcclxuXHJcbiAgY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjYWRkLWNhcmQtbW9kYWxcIiwgKGZvcm1EYXRhKSA9PiB7XHJcbiAgICBhZGRDYXJkUG9wdXAucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuICAgIGNvbnN0IGNhcmREYXRhID0geyBuYW1lOiBmb3JtRGF0YS5oZWFkaW5nLCBsaW5rOiBmb3JtRGF0YS5kZXNjcmlwdGlvbiB9O1xyXG4gICAgYXBpXHJcbiAgICAgIC5hZGRDYXJkKGNhcmREYXRhKVxyXG4gICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZ2V0Q2FyZEVsZW1lbnQoZGF0YSk7XHJcbiAgICAgICAgc2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxuICAgICAgICBhZGRDYXJkUG9wdXAuY2xvc2UoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4gYWRkQ2FyZFBvcHVwLnJlbmRlckxvYWRpbmcoZmFsc2UpKTtcclxuICB9KTtcclxuXHJcbiAgY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNpbWFnZS1tb2RhbFwiKTtcclxuICBjb25zdCBjb25maXJtUG9wdXAgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKFwiI2NvbmZpcm0tcG9wdXBcIik7XHJcblxyXG4gIGNvbmZpcm1Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICBjb25maXJtUG9wdXAuc2V0Q29uZmlybWF0aW9uSGFuZGxlcigoeyBjYXJkSWQsIGNhcmRFbGVtZW50IH0pID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGBDYXJkIElEIHRvIGRlbGV0ZTogJHtjYXJkSWR9YCk7IC8vIEFkZCB0aGlzIGxpbmUgdG8gZGVidWdcclxuICAgIGNvbmZpcm1Qb3B1cC5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG4gICAgYXBpXHJcbiAgICAgIC5kZWxldGVDYXJkKGNhcmRJZClcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGNhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgIGNvbmZpcm1Qb3B1cC5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKVxyXG4gICAgICAuZmluYWxseSgoKSA9PiBjb25maXJtUG9wdXAucmVuZGVyTG9hZGluZyhmYWxzZSkpO1xyXG4gIH0pO1xyXG5cclxuICBwcm9maWxlRWRpdFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgYWRkQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgaW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICBjb25zdCB1cGRhdGVBdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI3Byb2ZpbGUtcG9wdXBcIiwgKGZvcm1EYXRhKSA9PiB7XHJcbiAgICB1cGRhdGVBdmF0YXJQb3B1cC5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG4gICAgYXBpXHJcbiAgICAgIC5zZXRVc2VyQXZhdGFyKHsgYXZhdGFyOiBmb3JtRGF0YS5kZXNjcmlwdGlvbiB9KVxyXG4gICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIoZGF0YS5hdmF0YXIpO1xyXG4gICAgICAgIHVwZGF0ZUF2YXRhclBvcHVwLmNsb3NlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHVwZGF0ZUF2YXRhclBvcHVwLnJlbmRlckxvYWRpbmcoZmFsc2UpKTtcclxuICB9KTtcclxuXHJcbiAgdXBkYXRlQXZhdGFyUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgZnVuY3Rpb24gZ2V0Q2FyZEVsZW1lbnQoZGF0YSkge1xyXG4gICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAgICBkYXRhLFxyXG4gICAgICBcIiNjYXJkLXRlbXBsYXRlXCIsXHJcbiAgICAgIGhhbmRsZUltYWdlQ2xpY2ssXHJcbiAgICAgIChjYXJkSWQsIGNhcmRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYE9wZW5pbmcgY29uZmlybWF0aW9uIGZvciBjYXJkIElEOiAke2NhcmRJZH1gKTsgLy8gQWRkIHRoaXMgbGluZSB0byBkZWJ1Z1xyXG4gICAgICAgIGNvbmZpcm1Qb3B1cC5vcGVuKHsgY2FyZElkOiBjYXJkSWQsIGNhcmRFbGVtZW50OiBjYXJkRWxlbWVudCB9KTsgLy8gRW5zdXJlIGRhdGEgaXMgcGFzc2VkIGNvcnJlY3RseVxyXG4gICAgICB9LFxyXG4gICAgICAoY2FyZElkLCBpc0xpa2VkLCBjYXJkKSA9PiB7XHJcbiAgICAgICAgaWYgKGlzTGlrZWQpIHtcclxuICAgICAgICAgIGFwaVxyXG4gICAgICAgICAgICAuZGlzbGlrZUNhcmQoY2FyZElkKVxyXG4gICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgICBjYXJkLnNldElzTGlrZWQoZmFsc2UpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgYXBpXHJcbiAgICAgICAgICAgIC5saWtlQ2FyZChjYXJkSWQpXHJcbiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICAgIGNhcmQuc2V0SXNMaWtlZCh0cnVlKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgcmV0dXJuIGNhcmQuZ2V0VmlldygpO1xyXG4gIH1cclxuXHJcbiAgY29uc3Qgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gICAge1xyXG4gICAgICBpdGVtczogaW5pdGlhbENhcmRzLCAvLyBVc2UgdGhlIGluaXRpYWwgY2FyZHMgYXJyYXlcclxuICAgICAgcmVuZGVyZXI6IChjYXJkRGF0YSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZ2V0Q2FyZEVsZW1lbnQoY2FyZERhdGEpO1xyXG4gICAgICAgIHNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7XHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgXCIuY2FyZHNfX2xpc3RcIlxyXG4gICk7XHJcblxyXG4gIHByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBjb25zdCB1c2VyRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgICBwcm9maWxlRWRpdFBvcHVwLnNldElucHV0VmFsdWVzKHtcclxuICAgICAgaGVhZGluZzogdXNlckRhdGEubmFtZSxcclxuICAgICAgZGVzY3JpcHRpb246IHVzZXJEYXRhLmpvYixcclxuICAgIH0pO1xyXG4gICAgcHJvZmlsZUVkaXRQb3B1cC5vcGVuKCk7XHJcbiAgICBlZGl0Rm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTsgLy8gUmVzZXQgdmFsaWRhdGlvbiB3aGVuIG9wZW5pbmcgdGhlIHByb2ZpbGUgZWRpdCBmb3JtXHJcbiAgfSk7XHJcblxyXG4gIGFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIGFkZENhcmRQb3B1cC5vcGVuKCk7XHJcbiAgICBhZGRDYXJkRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpOyAvLyBEaXNhYmxlIHRoZSBzdWJtaXQgYnV0dG9uIHdoZW4gb3BlbmluZyB0aGUgYWRkIGNhcmQgZm9ybVxyXG4gIH0pO1xyXG5cclxuICBwcm9maWxlSW1hZ2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIHVwZGF0ZUF2YXRhclBvcHVwLm9wZW4oKTtcclxuICB9KTtcclxuXHJcbiAgYXBpXHJcbiAgICAuZ2V0VXNlckluZm8oKVxyXG4gICAgLnRoZW4oKHVzZXJEYXRhKSA9PiB7XHJcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXJEYXRhKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIHVzZXIgaW5mbzpcIiwgZXJyKSk7XHJcblxyXG4gIGFwaVxyXG4gICAgLmdldEluaXRpYWxDYXJkcygpXHJcbiAgICAudGhlbigoaW5pdGlhbENhcmRzKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiSW5pdGlhbCBDYXJkczpcIiwgaW5pdGlhbENhcmRzKTsgLy8gTG9nIHRoZSBpbml0aWFsIGNhcmRzIGRhdGFcclxuICAgICAgc2VjdGlvbi5yZW5kZXJJdGVtcyhpbml0aWFsQ2FyZHMpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgaW5pdGlhbCBjYXJkczpcIiwgZXJyKSk7XHJcbn0pO1xyXG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJoYW5kbGVEZWxldGVDbGljayIsIm5hbWUiLCJsaW5rIiwidGhpcyIsIl9uYW1lIiwiX2xpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfY2FyZEVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsImdldFZpZXciLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJ0ZXh0Q29udGVudCIsImNhcmRJbWFnZSIsInNyYyIsImFsdCIsIm9wdGlvbnMiLCJmb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtRWxlbWVudCIsIl9zdWJtaXRCdXR0b24iLCJfaW5wdXRFbHMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsImlucHV0RWwiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiZXJyb3JFbCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJfaGFzSW52YWxpZElucHV0Iiwic29tZSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9kaXNhYmxlQnV0dG9uIiwiX2VuYWJsZUJ1dHRvbiIsImRpc2FibGVkIiwiZm9yRWFjaCIsImVuYWJsZVZhbGlkYXRpb24iLCJlIiwicHJldmVudERlZmF1bHQiLCJyZXNldFZhbGlkYXRpb24iLCJ0b2dnbGVCdXR0b25TdGF0ZSIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2Nsb3NlQnV0dG9uIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIm9wZW4iLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldmVudCIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwiZXZ0IiwidGFyZ2V0IiwiUG9wdXAiLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9mb3JtIiwiX2lucHV0TGlzdCIsIl9nZXRJbnB1dFZhbHVlcyIsIl9mb3JtVmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInNldElucHV0VmFsdWVzIiwiZGF0YSIsInJlbmRlckxvYWRpbmciLCJpc0xvYWRpbmciLCJyZXNldCIsIl9pbWFnZUVsZW1lbnQiLCJfY2FwdGlvbkVsZW1lbnQiLCJQb3B1cFdpdGhDb25maXJtYXRpb24iLCJfY29uZmlybUJ1dHRvbiIsIl9jb25maXJtQnV0dG9uVGV4dCIsInNldENvbmZpcm1hdGlvbkhhbmRsZXIiLCJoYW5kbGVyIiwiX2hhbmRsZUNvbmZpcm0iLCJfZGF0YSIsImNvbnNvbGUiLCJsb2ciLCJsb2FkaW5nVGV4dCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfam9iRWxlbWVudCIsIl9hdmF0YXJFbGVtZW50IiwiZ2V0VXNlckluZm8iLCJqb2IiLCJhdmF0YXIiLCJzZXRVc2VySW5mbyIsIl9yZWYyIiwic2V0VXNlckF2YXRhciIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJpbml0aWFsQ2FyZHMiLCJ2YWxpZGF0aW9uT3B0aW9ucyIsIl9iYXNlVXJsIiwiYmFzZVVybCIsIl9oZWFkZXJzIiwiaGVhZGVycyIsIl9jaGVja1Jlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwidGhlbiIsImdldEluaXRpYWxDYXJkcyIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWRkQ2FyZCIsImRlbGV0ZUNhcmQiLCJjYXJkSWQiLCJsaWtlQ2FyZCIsImRpc2xpa2VDYXJkIiwiYXV0aG9yaXphdGlvbiIsInByb2ZpbGVFZGl0QnV0dG9uIiwiYWRkQ2FyZEJ1dHRvbiIsInByb2ZpbGVJbWFnZUJ1dHRvbiIsInVzZXJJbmZvIiwiVXNlckluZm8iLCJlZGl0Rm9ybVZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiLCJhZGRDYXJkRm9ybVZhbGlkYXRvciIsImltYWdlUG9wdXAiLCJwcm9maWxlRWRpdFBvcHVwIiwiUG9wdXBXaXRoRm9ybSIsImZvcm1EYXRhIiwiYXBpIiwiaGVhZGluZyIsImFib3V0IiwiZGVzY3JpcHRpb24iLCJjYXRjaCIsImVyciIsImVycm9yIiwiZmluYWxseSIsImFkZENhcmRQb3B1cCIsImNhcmREYXRhIiwiY2FyZEVsZW1lbnQiLCJnZXRDYXJkRWxlbWVudCIsInNlY3Rpb24iLCJQb3B1cFdpdGhJbWFnZSIsImNvbmZpcm1Qb3B1cCIsInVwZGF0ZUF2YXRhclBvcHVwIiwiaXNMaWtlZCIsImNhcmQiLCJyZXNwb25zZSIsInNldElzTGlrZWQiLCJ1c2VyRGF0YSJdLCJzb3VyY2VSb290IjoiIn0=